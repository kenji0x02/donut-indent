/**
 * donut-indent 0.0.1
 * Copyright (c) 2015, kenji0x02. MIT Licensed
 * https://github.com/kenji0x02/donut-indent 
 */
!function n(t,r,e){function o(i,u){if(!r[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=r[i]={exports:{}};t[i][0].call(l.exports,function(n){var r=t[i][1][n];return o(r?r:n)},l,l.exports,n,t,r,e)}return r[i].exports}for(var a="function"==typeof require&&require,i=0;i<e.length;i++)o(e[i]);return o}({1:[function(n,t,r){function e(n){var t=[],n=n.replace(/^#/,"");return t=6==n.length?n.match(/.{2}/g).map(function(n){return parseInt(n,16)}):n.split("").map(function(n){return parseInt(n+n,16)})}function o(n,t,r){return"#"+[n,t,r].map(function(n){return n.toString(16).replace(/^[0-9a-f]$/,"0$&")}).join("")}function a(n,t,r){var e,o,a;n/=255,t/=255,r/=255;var i=Math.max(Math.max(n,t),r),u=Math.min(Math.min(n,t),r);for(e=i==u?0:i==n?60*(t-r)/(i-u)+0:i==t?60*(r-n)/(i-u)+120:60*(n-t)/(i-u)+240;0>e;)e+=360;return o=(i+u)/2,a=i==u?0:.5>o?(i-u)/(i+u):(i-u)/(2-i-u),{h:e,l:o,s:a,type:"HLS"}}function i(n,t,r){for(var e,o,a;0>n;)n+=360;if(n%=360,0==r)return t=Math.round(255*t),{r:t,g:t,b:t,type:"RGB"};var i,u=.5>t?t*(1+r):t+r-t*r,c=2*t-u;return i=n+120,i>360&&(i-=360),e=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n,o=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n-120,0>i&&(i+=360),a=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,{r:Math.round(255*e),g:Math.round(255*o),b:Math.round(255*a),type:"RGB"}}t.exports.darken=function(n,t){if(0>t-0||t-0>100)return null;var r=e(n),u=a(r[0],r[1],r[2]),c=i(u.h,u.l-.01*t,u.s);return o(c.r,c.g,c.b)}},{}],2:[function(n,t,r){!function(t){"use strict";function r(n){return t(n+":header").css("fontSize").replace("px","")-0}function e(n){return t(n+":header").css("line-height").replace("px","")-0}function o(n){return Math.round(.45*n)}function a(n,t){return Math.round(.05*t+.5*(n-t))}function i(n){return Math.round(.45*n)}function u(n,r,e){t(e).css("margin-top",r),t(e).css("margin-right",r),e.width=n,e.height=n}function c(n,t,r,e,o){var a=o.getContext("2d"),i=1.5707963267948966,u=-i,c=i*(.04*r-1);a.beginPath(),a.moveTo(t,t),a.arc(t,t,n,u,c,!1),a.fillStyle=e,a.fill()}function d(n){var t=n.replace("donut_indent_","").split("_").map(function(n){return n-0}),d="h"+t.filter(function(n,t,r){return 0!=n}).length,l=r(d),f=e(d),s=o(l),h=a(f,l),v=i(l),m=document.getElementById(n);u(2*s,h,m),t.forEach(function(n,t,r){var e=Math.round(s*$.radiusRatio[t]);c(e-1,v,100,"#fff",m),c(e,v,n,$.color[t],m)})}function l(n){var r={};$.headerTagNumbers.forEach(function(n){r[n]=0});var e=[];return t.each(n,function(n,o){var a=t.extend(!0,{},r);n>0&&(a=t.extend(!0,{},e[n-1]));var i=m.headingNumber(o);a.headerNumber=i,a[i]+=1,$.headerTagNumbers.forEach(function(n){n>i&&(a[n]=0)}),e.push(a)}),e}function f(n){for(var t=1;t<n.length;t++){if(n[t].headerNumber<n[t-1].headerNumber){var r=$.headerTagNumbers.filter(function(r){return r>n[t].headerNumber});r.forEach(function(r,e,o){for(var a=n[t-1][r],i=t-1;i>0&&0!=n[i][r];i--)n[i][r]=Math.round(n[i][r]/a*100)})}t==n.length-1&&$.headerTagNumbers.forEach(function(r,e,o){for(var a=n[t][r],i=t;i>=0&&0!=n[i][r];i--)n[i][r]=Math.round(n[i][r]/a*100)})}return n}function s(n){var t=f(l(n));return t.map(function(n,t,r){return g+$.headerTagNumbers.map(function(t){return n[t]}).join("_")})}function h(n,r){t.each(n,function(n,e){t(e).wrap("<div></div>");var o='<div class="donut-indent" style="float:left;"><canvas id="'+r[n]+'"></div>';t(e).before(o)})}function v(){var r=t(":header").filter(function(n,t){return m.headingNumber(t)<=$.settings.indentDepth}),e=s(r);h(r,e),e.forEach(function(n){d(n)});var o=n("./overlay-content.js"),a=o.create(r,e);o.initialize(),t("#modal-content").append(a)}var m=(n("./modal.js"),n("./utils.js")),p=10,g="donut_indent_",$={};$={defaults:{indentDepth:3,color:"#59bb0c",gammmaValue:1.8},settings:t.extend(!0,{},$.defaults),init:function(r){var e=n("./color.js");$.settings=t.extend($.defaults,r),$.headerTagNumbers=Array.apply(null,Array($.settings.indentDepth)).map(function(n,t){return t+1}),$.radiusRatio=t.extend(!0,[],$.headerTagNumbers).reverse().map(function(n){return Math.pow(1*n/$.headerTagNumbers.length,1/$.settings.gammmaValue)}),$.color=$.headerTagNumbers.map(function(n){return e.darken($.settings.color,p*(n-1))})}},t.donutIndent=function(n){$.init(n),v()}}(jQuery),$.donutIndent()},{"./color.js":1,"./modal.js":3,"./overlay-content.js":4,"./utils.js":5}],3:[function(n,t,r){function e(){var n=$(window).width(),t=$(window).height(),r=$("#modal-content").outerWidth(),e=$("#modal-content").outerHeight();if(e>t&&r>n)$("#modal-content").css({left:"0px",top:"0px"});else if(e>t&&n>r){var a=(n-o-r)/2;$("#modal-content").css({left:a+"px",top:"0px"})}else if(t>e&&r>n){var i=(t-o-e)/2;$("#modal-content").css({left:"0px",top:i+"px"})}else{var a=(n-r)/2,i=(t-e)/2;$("#modal-content").css({left:a+"px",top:i+"px"})}}$("html").append('<div class="scrollbar" style="overflow:scroll;"></div>');var o=window.innerWidth-$(".scrollbar").prop("clientWidth");$(".scrollbar").hide(),$(document).on("click",".donut-indent",function(){return $("html, body").addClass("lock"),$("#modal-overlay").length>0?!1:($("body").append('<div id="modal-overlay"></div>'),$("#modal-overlay").fadeIn("slow"),$("#modal-content").wrap("<div id='modal-wrap'></div>"),$("#modal-wrap").show(),e(),$("#modal-content").fadeIn("slow"),void $("#modal-wrap, .overlay_anchor").off().on("click",function(){$("#modal-content,#modal-overlay").fadeOut("slow",function(){$("html, body").removeClass("lock"),$("#modal-overlay").remove(),$("#modal-content").unwrap("<div id='modal-wrap'></div>")})}))}),$(window).resize(e)},{}],4:[function(n,t,r){function e(n,t){var r=a(1),e=0,c=l.headingNumber(n[0])-u(n);r+=a(c),e+=c;for(var d=0;d<n.length-1;d++){var f=n[d];r+=o($(f).text(),t[d]);var s=l.headingNumber(n[d+1])-l.headingNumber(n[d]);r+=a(s),r+=i(s),e+=s}var h=n[n.length-1];return r+=o($(h).text(),t[n.length-1]),r+=i(-e)}function o(n,t){var r=d(t);return'<li><a class="overlay_anchor" href="#'+t+'" id="'+r+'">'+n+"</a></li>"}function a(n){var t="";if(n>0)for(var r=0;n>r;r++)t+="<ul>";return t}function i(n){var t="";if(0>n)for(var r=0;-n>r;r++)t+="</ul>";return t}function u(n){var t=6;return $.each(n,function(n,r){var e=l.headingNumber(r);t>e&&(t=e)}),t}function c(){$("#modal-content").length>0?$("#modal-content").children().remove():$("body").append('<div id="modal-content"></div>')}function d(n){return n+"_overlay"}var l=n("./utils.js");$(document).on("click",".donut-indent",function(){var n="#"+d($(this).children("canvas").attr("id"));$(n).css("font-weight","bold"),$("#modal-wrap, .overlay_anchor").on("click",function(){$(n).css("font-weight","")})}),t.exports={create:e,initialize:c}},{"./utils.js":5}],5:[function(n,t,r){var e=function(n){return void 0!==n?n.tagName.replace("H","")-0:null};t.exports={headingNumber:e}},{}]},{},[2]);
//# sourceMappingURL=donut-indent.min.js.map
