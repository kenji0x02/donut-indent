/**
 * donut-indent 0.0.1
 * Copyright (c) 2015, kenji0x02. MIT Licensed
 * https://github.com/kenji0x02/donut-indent 
 */
!function n(t,e,r){function o(i,u){if(!e[i]){if(!t[i]){var c="function"==typeof require&&require;if(!u&&c)return c(i,!0);if(a)return a(i,!0);var d=new Error("Cannot find module '"+i+"'");throw d.code="MODULE_NOT_FOUND",d}var l=e[i]={exports:{}};t[i][0].call(l.exports,function(n){var e=t[i][1][n];return o(e?e:n)},l,l.exports,n,t,e,r)}return e[i].exports}for(var a="function"==typeof require&&require,i=0;i<r.length;i++)o(r[i]);return o}({1:[function(n,t,e){function r(n){var t=[],n=n.replace(/^#/,"");return t=6==n.length?n.match(/.{2}/g).map(function(n){return parseInt(n,16)}):n.split("").map(function(n){return parseInt(n+n,16)})}function o(n,t,e){return"#"+[n,t,e].map(function(n){return n.toString(16).replace(/^[0-9a-f]$/,"0$&")}).join("")}function a(n,t,e){var r,o,a;n/=255,t/=255,e/=255;var i=Math.max(Math.max(n,t),e),u=Math.min(Math.min(n,t),e);for(r=i==u?0:i==n?60*(t-e)/(i-u)+0:i==t?60*(e-n)/(i-u)+120:60*(n-t)/(i-u)+240;0>r;)r+=360;return o=(i+u)/2,a=i==u?0:.5>o?(i-u)/(i+u):(i-u)/(2-i-u),{h:r,l:o,s:a,type:"HLS"}}function i(n,t,e){for(var r,o,a;0>n;)n+=360;if(n%=360,0==e)return t=Math.round(255*t),{r:t,g:t,b:t,type:"RGB"};var i,u=.5>t?t*(1+e):t+e-t*e,c=2*t-u;return i=n+120,i>360&&(i-=360),r=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n,o=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,i=n-120,0>i&&(i+=360),a=60>i?c+(u-c)*i/60:180>i?u:240>i?c+(u-c)*(240-i)/60:c,{r:Math.round(255*r),g:Math.round(255*o),b:Math.round(255*a),type:"RGB"}}t.exports.darken=function(n,t){if(0>t-0||t-0>100)return null;var e=r(n),u=a(e[0],e[1],e[2]),c=i(u.h,u.l-.01*t,u.s);return o(c.r,c.g,c.b)}},{}],2:[function(n,t,e){"use strict";function r(n,t){var e={};t.forEach(function(n){e[n]=0});var r=[];return $.each(n,function(n,o){var a=$.extend(!0,{},e);n>0&&(a=$.extend(!0,{},r[n-1]));var i=s.headingNumber(o);a.headerNumber=i,a[i]+=1,t.forEach(function(n){n>i&&(a[n]=0)}),r.push(a)}),r}function o(n,t){1==n.length&&t.forEach(function(t){t==n[0][t]?n[0][t]=100:n[0][t]=0});for(var e=1;e<n.length;e++){if(n[e].headerNumber<n[e-1].headerNumber){var r=t.filter(function(t){return t>n[e].headerNumber});r.forEach(function(t){for(var r=n[e-1][t],o=e-1;o>=0&&0!=n[o][t];o--)n[o][t]=Math.round(n[o][t]/r*100)})}e==n.length-1&&t.forEach(function(t){for(var r=n[e][t],o=e;o>=0&&0!=n[o][t];o--)n[o][t]=Math.round(n[o][t]/r*100)})}return n}function a(n,t){var e=o(r(n,t),t);return e.map(function(n){return f+t.map(function(t){return n[t]}).join("_")})}function i(n){return $(n+":header").css("fontSize").replace("px","")-0}function u(n){return $(n+":header").css("line-height").replace("px","")-0}function c(n){return Math.round(.45*n)}function d(n,t){return Math.round(.05*t+.5*(n-t))}function l(n){return Math.round(.45*n)}var f="donut_indent_",s=n("./utils.js");t.exports={createSequentialNo:r,createPercentage:o,createID:a,getHeaderFontSize:i,getHeaderLineHeight:u,calcIconHalfSize:c,calcMarginTop:d,calcCenter:l}},{"./utils.js":6}],3:[function(n,t,e){!function(t){"use strict";function e(n,e,r){t(r).css("margin-top",e),t(r).css("margin-right",e),r.width=n,r.height=n}function r(n,t,e,r,o){var a=o.getContext("2d"),i=1.5707963267948966,u=-i,c=i*(.04*e-1);a.beginPath(),a.moveTo(t,t),a.arc(t,t,n,u,c,!1),a.fillStyle=r,a.fill()}function o(n){var t=n.replace("donut_indent_","").split("_").map(function(n){return n-0}),o="h"+t.filter(function(n,t,e){return 0!=n}).length,a=c.getHeaderFontSize(o),i=c.getHeaderLineHeight(o),u=c.calcIconHalfSize(a),d=c.calcMarginTop(i,a),f=c.calcCenter(a),s=document.getElementById(n);e(2*u,d,s),t.forEach(function(n,t,e){var o=Math.round(u*l.radiusRatio[t]);r(o-1,f,100,"#fff",s),r(o,f,n,l.color[t],s)})}function a(n,e){t.each(n,function(n,r){t(r).wrap("<div></div>");var o='<div class="donut-indent" style="float:left;"><canvas id="'+e[n]+'"></div>';t(r).before(o)})}function i(){var e=t(":header").filter(function(n,t){return u.headingNumber(t)<=l.settings.indentDepth}),r=c.createID(e,l.headerTagNumbers);a(e,r),r.forEach(function(n){o(n)});var i=n("./overlay-content.js"),d=i.create(e,r);i.initialize(),t("#modal-content").append(d)}var u=(n("./modal.js"),n("./utils.js")),c=n("./donut-indent-helper.js"),d=10,l={};l={defaults:{indentDepth:3,color:"#59bb0c",gammaValue:1.8},settings:t.extend(!0,{},l.defaults),init:function(e){var r=n("./color.js");l.settings=t.extend(l.defaults,e),l.headerTagNumbers=Array.apply(null,Array(l.settings.indentDepth)).map(function(n,t){return t+1}),l.radiusRatio=t.extend(!0,[],l.headerTagNumbers).reverse().map(function(n){return Math.pow(1*n/l.headerTagNumbers.length,1/l.settings.gammaValue)}),l.color=l.headerTagNumbers.map(function(n){return r.darken(l.settings.color,d*(n-1))})}},t.donutIndent=function(n){l.init(n),i()}}(jQuery),$.donutIndent()},{"./color.js":1,"./donut-indent-helper.js":2,"./modal.js":4,"./overlay-content.js":5,"./utils.js":6}],4:[function(n,t,e){function r(){var n=$(window).width(),t=$(window).height(),e=$("#modal-content").outerWidth(),r=$("#modal-content").outerHeight(),i=o(),u=a(i,e,n,r,t);$("#modal-content").css({left:u.x+"px",top:u.y+"px"})}function o(){$("html").append('<div class="scrollbar" style="overflow:scroll;"></div>');var n=window.innerWidth-$(".scrollbar").prop("clientWidth");return $(".scrollbar").hide(),n}function a(n,t,e,r,o){var a=t-e,i=r-o;return a>0&&i>0?{x:0,y:0}:0>a&&i>0?{x:(-a-n)/2,y:0}:a>0&&0>i?{x:0,y:(-i-n)/2}:{x:-a/2,y:-i/2}}$(document).on("click",".donut-indent",function(){return $("html, body").addClass("lock"),$("#modal-overlay").length>0?!1:($("body").append('<div id="modal-overlay"></div>'),$("#modal-overlay").fadeIn("slow"),$("#modal-content").wrap("<div id='modal-wrap'></div>"),$("#modal-wrap").show(),r(),$("#modal-content").fadeIn("slow"),void $("#modal-wrap, .overlay_anchor").off().on("click",function(){$("#modal-content,#modal-overlay").fadeOut("slow",function(){$("html, body").removeClass("lock"),$("#modal-overlay").remove(),$("#modal-content").unwrap("<div id='modal-wrap'></div>")})}))}),$(window).resize(r),t.exports={_getScrollBarWidth:o,_getModalPosition:a}},{}],5:[function(n,t,e){function r(n,t){var e=a(1),r=0,c=l.headingNumber(n[0])-u(n);e+=a(c),r+=c;for(var d=0;d<n.length-1;d++){var f=n[d];e+=o($(f).text(),t[d]);var s=l.headingNumber(n[d+1])-l.headingNumber(n[d]);e+=a(s),e+=i(s),r+=s}var h=n[n.length-1];return e+=o($(h).text(),t[n.length-1]),e+=i(-r-1)}function o(n,t){var e=d(t);return'<li><a class="overlay_anchor" href="#'+t+'" id="'+e+'">'+n+"</a></li>"}function a(n){var t="";if(n>0)for(var e=0;n>e;e++)t+="<ul>";return t}function i(n){var t="";if(0>n)for(var e=0;-n>e;e++)t+="</ul>";return t}function u(n){var t=6;return $.each(n,function(n,e){var r=l.headingNumber(e);t>r&&(t=r)}),t}function c(){$("#modal-content").length>0?$("#modal-content").children().remove():$("body").append('<div id="modal-content"></div>')}function d(n){return n+"_overlay"}var l=n("./utils.js");$(document).on("click",".donut-indent",function(){var n="#"+d($(this).children("canvas").attr("id"));$(n).css("font-weight","bold"),$("#modal-wrap, .overlay_anchor").on("click",function(){$(n).css("font-weight","")})}),t.exports={create:r,initialize:c}},{"./utils.js":6}],6:[function(n,t,e){var r=function(n){return void 0!==n?n.tagName.replace("H","")-0:null};t.exports={headingNumber:r}},{}]},{},[3]);
//# sourceMappingURL=donut-indent.min.js.map
